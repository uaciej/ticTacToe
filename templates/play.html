<!DOCTYPE html>
<html>

<head>
    <title>Play Tic Tac Toe</title>
    <script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/3.1.3/socket.io.js"></script>
    <link rel="stylesheet" href="/static/styles.css">
    <script>
        const socket = io.connect()

        socket.emit('game_start');

        socket.on('move', (data) => {
            const board = data.board;
            updateBoard(board);
            if (data.game_over) {
                socket.emit('game_over', { winner: data.winner });
            }
        });

        socket.on('game_over', (result) => {
            if (result === 'X') {
                console.log("You Won");
            } else if (result === 'O') {
                console.log("You Lost");
            } else {
                console.log("Tie");
            }
        });

    </script>
</head>

<body>
    <h1>Play Tic Tac Toe</h1>
    <div class="board">
        <script>
            function updateBoard(board) {
                const boardContainer = document.querySelector('.board');
                boardContainer.innerHTML = '';
                for (let row = 0; row < 3; row++) {
                    for (let col = 0; col < 3; col++) {
                        const cell = document.createElement('div');
                        cell.className = 'cell';
                        cell.dataset.row = row;
                        cell.dataset.col = col;
                        cell.textContent = board[row][col];
                        cell.addEventListener('click', () => handleCellClick(row, col));
                        boardContainer.appendChild(cell);
                    }
                }
            }

            function handleCellClick(row, col) {
                socket.emit('make_move', { row, col });
            }
        </script>
    </div>

</body>

</html>